<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Home/Search</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
          crossorigin="anonymous">
    <th:block th:insert="base :: Bootstrap"></th:block>
    <style>
        body {
            height: 100%;
            background-image: url("https://res.cloudinary.com/dgogsuupz/image/upload/v1564593581/background_xpahh7.jpg");
            background-position: center;
            /*background-repeat: repeat;*/
            background-size: cover;
            background-attachment: fixed;
        }

        @media (min-width: 500px) {
            .jumbotron {
                padding: 1rem 2rem;
            }
        }
    </style>
</head>
<body>
<nav th:replace="base :: navbar"></nav>
<div class="container">
    <br/><br/><br/><br/>

    <div class="jumbotron" th:each="flight : ${flights}">
        <hr class="my-4">
        <h5> Flight details</h5> <br><br>
        <p th:inline="text"> Operating Airport <br> <b>[[${flight.operatingAirport}]]</b></p>
        <p> Operating Airline <br> <b> [[${flight.operatingAirline}]]</b>  </p>
        <p th:inline="text"> Departure Location <br> <b>[[${flight.startLocation}]] </b>  </p>
        <p th:inline="text"> Arrival Location <br> <b>[[${flight.endLocation}]]  </b>
        <p> Price $[[${flight.price}]] </p>
            <p th:inline="text"> Departing Date<b> [[${flight.startDate}]]</b>
                Returning Date <b>[[${flight.endDate}]]</b> </p>
        <p th:inline="text"> Departing time <i>[[${flight.startTime}]]</i>
            Returning time <i> [[${flight.endTime}]]</i></p>
            <p th:if="${flight.roundTrip == true }"> This flight is round trip. </p>
            <p th:if="${flight.layover == true}"> There is a Layover</p>
        <p th:inline="text"> Flight capacity <i>[[${flight.flightCapacity}]]</i></p>
        <p th:inline="text"> You have <i> [[${flight.rewardPoints}]]</i>
            reward points you can use towards your flight today. </p>
            <p th:if="${flight.discount}"> You have a discount </p>
        <br>
        <h6 sec:authorize="!isAuthenticated()"> <b>Register to select flights </b> <a href="/register"> Register here</a>
        Already registered? <a href="/login"> Sign in </a> </b> </h6>
        <a sec:authorize="isAuthenticated()" class="btn btn-primary" th:href="@{/payment/{id}(id=${flight.id})}" role="button" > Select flight </a>


    </div>
</div>
<div th:replace="base :: footer"></div>
</body>
</html>